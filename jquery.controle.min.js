(function(a){a.fn.controle=function(d,c){var g=!1,f=!g,j={num:/^[0-9]+$/,numnotnul:/^[1-9]{1}|[0-9]{2,16}$/,tel:/^[\s\/\(\)\+\.0-9]{8,20}$/,cp:/^[0-9]{4,5}$/,heure:/^[0-9]{2}:[0-9]{2}(:[0-9]|)$/,date:/^[0-9]{2,2}\/[0-9]{2,2}\/[0-9]{4,4}$/,email:/^[a-z0-9._-]+@[a-z0-9.-]{2,}[.][a-z]{2,3}$/,url:/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,rew:/^[0-9a-z-]{1,50}$/,notnul:function(k){return(k!=""&&k!=0)},mix:function(k){return(k.length>2)}},e={controlHandler:".form-controle",ajax:g,elmtEvents:g,ifFirstWrong:g,ifWrong:g,ifRight:g,beforeElmtCheck:g,beforeCheck:g,beforeSubmit:g,afterSubmit:g};j=a.extend({},j,c);d=d||{};events=d.elmtEvents||{};events=a.extend({},e.elmtEvents,events);d=a.extend(e,d);d.elmtEvents=events;function b(l,k){this.form=a(l);this.elmt=a(k);this.check=function(){var o,q,p,t,s,n,m,r;if(i(d.beforeElmtCheck)){r=d.beforeElmtCheck;r.call(this.form,this.elmt,this)}s=this.elmt.val();o=f;if(typeof this.elmt.attr("class")==="undefined"){return f}q=this.elmt.attr("class").split(" ");m=a.inArray("form-controle",q);if(q.length<m+3){return f}p=q[m+1]=="form-oblig"||s!="";t=q[m+2].replace("form-","");if(p&&t in j){n=j[t];if(i(n)){o=n.call(this.form,s,this.elmt,this)}else{o=n.test(s)}}if(o===g){if(i(d.ifWrong)){r=d.ifWrong;r.call(this.form,this.elmt,this)}return g}if(i(d.ifRight)){r=d.ifRight;r.call(this.form,this.elmt,this)}return f}}function h(k){this.form=a(k);this.champs=[];this.init=function(){var l=this;a(d.controlHandler,this.form).each(function(){l.champs.push(new b(this.form,this))})};this.check=function(){var l=f;a.each(this.champs,function(m,o){var n;if(!o.check()){if(l){l=g;if(i(d.ifFirstWrong)){n=d.ifFirstWrong;n.call(a(self),o.elmt,o)}}}});return l};this.init()}return this.each(function(){var l=this,n,m,o=a(l).attr("method"),k=new h(this);if(typeof o=="undefined"||o==null){o="post"}if(d.elmtEvents){for(evnt in d.elmtEvents){a.each(k.champs,function(q,p){var r=evnt;p.elmt.bind(r,function(s){d.elmtEvents[r].call(this,s,p)})})}}k.form.submit(function(p){var r,q;if(i(d.beforeCheck)){n=d.beforeCheck;n.call(k.form,k)}m=k.check();if(m){if(i(d.beforeSubmit)){n=d.beforeSubmit;n.call(k.form,k)}if(d.ajax!==g){q=k.form.attr("action");r=k.form.serialize();a.ajax({url:q,data:r,type:o,dataType:"json",success:function(s){if(i(d.afterSubmit)){n=d.afterSubmit;n.call(k.form,s,k)}}})}else{return f}}p.preventDefault();return g})});function i(k){return a.isFunction(k)}}})(jQuery);