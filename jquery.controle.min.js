/*!
 * @author Thomas <thansen@solire.fr>
 * @licence CC BY-NC 4.0 http://creativecommons.org/licenses/by-nc/4.0/
 */
(function(a){a.fn.controle=function(d,c){var g=!1,f=!g,j={num:/^[0-9]+$/,numnotnul:/^[1-9]{1}|[0-9]{2,16}$/,tel:/^[\s\/\(\)\+\.0-9]{8,20}$/,cp:/^[0-9]{4,5}$/,heure:/^[0-9]{2}:[0-9]{2}(:[0-9]|)$/,date:/^[0-9]{2,2}\/[0-9]{2,2}\/[0-9]{4,4}$/,email:/^[a-z0-9._-]+@[a-z0-9.-]{2,}[.][a-z]{2,3}$/,url:/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,rew:/^[0-9a-z-]{1,50}$/,notnul:function(k){return(k!=""&&k!=0)},mix:function(k){return(k.length>2)},atleastonechecked:function(n,l){var k=l.attr("name"),m=a('input[name="'+k+'"]:checked',this).length;return(m>0)}},e={controlHandler:".form-controle",ajax:g,elmtEvents:g,ifFirstWrong:g,ifWrong:g,ifRight:g,beforeElmtCheck:g,beforeCheck:g,beforeSubmit:g,afterSubmit:g};j=a.extend({},j,c);d=d||{};events=d.elmtEvents||{};events=a.extend({},e.elmtEvents,events);d=a.extend(e,d);d.elmtEvents=events;function b(l,k){this.form=a(l);this.elmt=a(k);this.check=function(){var q,o,n,s,u,p,t,m,r;if(i(d.beforeElmtCheck)){m=d.beforeElmtCheck;m.call(this.form,this.elmt,this)}u=this.elmt.val();q=f;if(typeof this.elmt.attr("class")==="undefined"){return f}o=this.elmt.attr("class").split(" ");t=a.inArray("form-controle",o);if(o.length<t+3){return f}n=o[t+1]=="form-oblig"||u!="";s=o[t+2].replace("form-","");if(n&&s in j){p=j[s];if(i(p)){q=p.call(this.form,u,this.elmt,this)}else{if(!a.isArray(p)){r=[p]}else{r=p}a.each(r,function(v,w){if(q){q=w.test(u)}})}}if(q===g){if(i(d.ifWrong)){m=d.ifWrong;m.call(this.form,this.elmt,this)}return g}if(i(d.ifRight)){m=d.ifRight;m.call(this.form,this.elmt,this)}return f}}function h(k){this.form=a(k);this.champs=[];this.init=function(){var l=this;a(d.controlHandler,this.form).each(function(){l.champs.push(new b(this.form,this))})};this.check=function(){var l=f;a.each(this.champs,function(m,o){var n;if(!o.check()){if(l){l=g;if(i(d.ifFirstWrong)){n=d.ifFirstWrong;n.call(a(self),o.elmt,o)}}}});return l};this.init()}return this.each(function(){var l=this,n,m,o=a(l).attr("method"),k=new h(this);if(typeof o=="undefined"||o==null){o="post"}if(d.elmtEvents){for(evnt in d.elmtEvents){a.each(k.champs,function(q,p){var r=evnt;p.elmt.bind(r,function(s){d.elmtEvents[r].call(this,s,p)})})}}k.form.submit(function(p){var r,q;if(i(d.beforeCheck)){n=d.beforeCheck;n.call(k.form,k)}m=k.check();if(m){if(i(d.beforeSubmit)){n=d.beforeSubmit;n.call(k.form,k)}if(d.ajax!==g){q=k.form.attr("action");r=k.form.serialize();a.ajax({url:q,data:r,type:o,dataType:"json",success:function(s){if(i(d.afterSubmit)){n=d.afterSubmit;n.call(k.form,s,k)}}})}else{return f}}p.preventDefault();return g})});function i(k){return a.isFunction(k)}}})(jQuery);