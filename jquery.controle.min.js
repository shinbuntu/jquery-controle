/**
 * @author Thomas <thansen@solire.fr>
 * @licence Solire <http://www.solire.fr>
 */
(function(a){a.fn.controle=function(g,e){var b=!1,c=!b,d={num:/^[0-9]+$/,numnotnul:/^[1-9]{1}|[0-9]{2,16}$/,tel:/^[\s\/\(\)\+\.0-9]{8,20}$/,cp:/^[0-9]{4,5}$/,heure:/^[0-9]{2}:[0-9]{2}(:[0-9]|)$/,date:/^[0-9]{2,2}\/[0-9]{2,2}\/[0-9]{4,4}$/,email:/^[a-z0-9._-]+@[a-z0-9.-]{2,}[.][a-z]{2,3}$/,url:/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,rew:/^[0-9a-z-]{1,50}$/,notnul:function(h){return(h!=""&&h!=0)},mix:function(h){return(h.length>2)}},f={controlHandler:".form-controle",ajax:b,elmtEvents:b,ifFirstWrong:b,ifWrong:b,ifRight:b,beforeElmtCheck:b,beforeCheck:b,beforeSubmit:b,afterSubmit:b};d=a.extend({},d,e);g=g||{};events=g.elmtEvents||{};events=a.extend({},f.elmtEvents,events);g=a.extend(f,g);g.elmtEvents=events;return this.each(function(){var m=a(this),j=g,k,i,o=m.attr("method");if(typeof o=="undefined"||o==null){o="post"}m.submit(function(p){var r,q;if(l(j.beforeCheck)){k=j.beforeCheck;k.call(m)}i=h();if(i){if(l(j.beforeSubmit)){k=j.beforeSubmit;k.call(m)}if(j.ajax!==b){q=m.attr("action");r=m.serialize();a.ajax({url:q,data:r,type:o,dataType:"json",success:function(s){if(l(j.afterSubmit)){k=j.afterSubmit;k.call(m,s)}}})}else{return c}}p.preventDefault();return b});if(j.elmtEvents){for(evnt in j.elmtEvents){a(j.controlHandler,m).bind(evnt,j.elmtEvents[evnt])}}function h(){var p=c;a(j.controlHandler,m).each(function(){var q;if(!n(a(this))){if(p){p=b;if(l(j.ifFirstWrong)){q=j.ifFirstWrong;q.call(m,a(this))}}}});return p}function n(p){var u,s,r,v,x,t,w,q;if(l(j.beforeElmtCheck)){q=j.beforeElmtCheck;q.call(m,p)}x=p.val();u=c;if(typeof p.attr("class")=="undefined"){return c}s=p.attr("class").split(" ");w=a.inArray("form-controle",s);if(s.length<w+3){return c}r=s[w+1]=="form-oblig"||x!="";v=s[w+2].replace("form-","");if(r&&v in d){t=d[v];if(l(t)){u=t.call(m,x,p)}else{u=t.test(x)}}if(u==b){if(l(j.ifWrong)){q=j.ifWrong;q.call(m,p)}return b}if(l(j.ifRight)){q=j.ifRight;q.call(m,p)}return c}function l(p){return a.isFunction(p)}})}})(jQuery);